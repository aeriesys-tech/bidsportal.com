{"ast":null,"code":"import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withKeys as _withKeys, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"search-inner\"\n};\nconst _hoisted_2 = [\"tabindex\", \"value\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"agency-search-dropdown\"\n};\nconst _hoisted_4 = {\n  class: \"search-input_wrap\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"table table-responsive-sm table-bordered table-striped table-sm search-list\"\n};\nconst _hoisted_7 = [\"onMousedown\", \"onMouseover\"];\nconst _hoisted_8 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([[$data.isOpen ? 'search search-open' : 'search'], \"dropdown-container\"])\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"input\", {\n    class: _normalizeClass([\"form-control form-control-sm search-selected\", $props.customClass]),\n    ref: \"toggle\",\n    tabindex: $props.tabindex,\n    value: $options.selectedText,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.onToggle && $options.onToggle(...args)),\n    onKeydown: _cache[1] || (_cache[1] = (...args) => $options.onKey && $options.onKey(...args))\n  }, null, 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2), _createVNode(_Transition, {\n    name: \"fade\",\n    mode: \"out-in\"\n  }, {\n    default: _withCtx(() => [$data.isOpen ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control form-control-sm search-input\",\n      autocomplete: \"off\",\n      placeholder: \"Search...\",\n      ref: \"search\",\n      onBlur: _cache[2] || (_cache[2] = (...args) => $options.onBlur && $options.onBlur(...args)),\n      onInput: _cache[3] || (_cache[3] = (...args) => $options.onSearch && $options.onSearch(...args)),\n      onKeydown: [_cache[4] || (_cache[4] = _withKeys((...args) => $options.onEsc && $options.onEsc(...args), [\"esc\"])), _cache[5] || (_cache[5] = _withKeys((...args) => $options.onUpKey && $options.onUpKey(...args), [\"up\"])), _cache[6] || (_cache[6] = _withKeys((...args) => $options.onDownKey && $options.onDownKey(...args), [\"down\"])), _cache[7] || (_cache[7] = _withKeys((...args) => $options.onEnterKey && $options.onEnterKey(...args), [\"enter\"]))]\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), $data.results && $data.results.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"table\", _hoisted_6, [_createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.results, (result, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        class: _normalizeClass([\"search-item\", ['search-link', $data.selectIndex === index ? 'search-active' : '']]),\n        onMousedown: _withModifiers($event => $options.select(result), [\"prevent\"]),\n        onMouseover: _withModifiers($event => $options.onMouse(index), [\"prevent\"]),\n        key: index\n      }, [_createElementVNode(\"td\", null, _toDisplayString(result[$props.label]), 1 /* TEXT */)], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_7);\n    }), 128 /* KEYED_FRAGMENT */))])])])) : _createCommentVNode(\"v-if\", true), !$data.results.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n      class: \"btn btn-info btn-sm\",\n      onMousedown: _cache[8] || (_cache[8] = _withModifiers((...args) => $options.addAgency && $options.addAgency(...args), [\"prevent\"]))\n    }, \"Add Agency\", 32 /* NEED_HYDRATION */)])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })])], 2 /* CLASS */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_normalizeClass","$data","isOpen","_createElementVNode","_hoisted_1","$props","customClass","ref","tabindex","value","$options","selectedText","onClick","_cache","args","onToggle","onKeydown","onKey","_hoisted_2","_createVNode","_Transition","name","mode","default","_withCtx","_hoisted_3","_hoisted_4","type","autocomplete","placeholder","onBlur","onInput","onSearch","_withKeys","onEsc","onUpKey","onDownKey","onEnterKey","results","length","_hoisted_5","_hoisted_6","_Fragment","_renderList","result","index","selectIndex","onMousedown","_withModifiers","$event","select","onMouseover","onMouse","_toDisplayString","label","_hoisted_7","_createCommentVNode","_hoisted_8","addAgency","_"],"sources":["/private/var/www/html/bidsportal.com/admin/src/components/AgencySearch.vue"],"sourcesContent":["<template>\n    <div :class=\"[isOpen ? 'search search-open' : 'search']\" class=\"dropdown-container\">\n        <div class=\"search-inner\">\n            <input class=\"form-control form-control-sm search-selected\" \n                ref=\"toggle\" \n                :tabindex=\"tabindex\"\n                :value=\"selectedText\"\n                :class=\"customClass\"\n                @click=\"onToggle\"\n                @keydown=\"onKey\"\n            >\n            <transition name=\"fade\" mode=\"out-in\">\n                <div class=\"agency-search-dropdown\" v-if=\"isOpen\">\n                    <div class=\"search-input_wrap\">\n                        \n                        <input type=\"text\" class=\"form-control form-control-sm search-input\" autocomplete=\"off\" placeholder=\"Search...\"\n                            ref=\"search\" @blur=\"onBlur\"\n                            @input=\"onSearch\"\n                            @keydown.esc=\"onEsc\"\n                            @keydown.up=\"onUpKey\"\n                            @keydown.down=\"onDownKey\"\n                            @keydown.enter=\"onEnterKey\"\n                        >\n                    </div>\n                    <div v-if=\"results && results.length\">\n                        <table class=\"table table-responsive-sm table-bordered table-striped table-sm search-list\">\n                            <tbody>\n                                <tr class=\"search-item\" v-for=\"(result, index) in results\" @mousedown.prevent=\"select(result)\" @mouseover.prevent=\"onMouse(index)\" :class=\"['search-link', selectIndex === index ? 'search-active':'']\" :key=\"index\">\n                                    <td>\n                                    {{ result[label] }}\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div v-if=\"!results.length\">\n                        <button class=\"btn btn-info btn-sm\" @mousedown.prevent=\"addAgency\">Add Agency</button>\n                    </div>\n                </div>\n            </transition>\n        </div>\n    </div>\n</template>\n\n<script type=\"text/javascript\">\n    export default {\n        props: {\n            customClass: {\n                default: ''\n            },\n            initialize: {\n                default: null\n            },\n            id: {\n                default: null\n            },\n            label: {\n                default: null\n            },\n            placeholder: {\n                default: \"Select One\"\n            },\n            data:{\n                default:null\n            },\n            tabindex: {\n                default: 0\n            }\n        },\n        data () {\n            return {\n                selectIndex: -1,\n                isOpen: false,\n                search: '',\n                results: [],\n                query: {\n                    search: ''\n                },\n                temp:[],\n                agencies:[]\n            }\n        },\n        computed: {\n            selectedText() {\n                let vm =this\n                if(vm.initialize) {\n                    let result = vm.data.filter(function (el) {\n                        return el[vm.id]==vm.initialize\n                    });\n                    if(result && result.length!=0) {\n                        return result[0][vm.label]\n                    }\n                    else {\n                        return vm.placeholder;\n                    }\n                }\n                else {\n                    return vm.placeholder;\n                }\n            }\n        },\n        \n        methods: {\n            addAgency() {\n                let vm = this\n                let agency = {\n                    agency_name : this.initialize?.target?.value\n                }\n                vm.$store\n                    .dispatch(\"post\", { uri: \"addAgency\", data: agency })\n                    .then(function (response) {\n                        vm.$emit('updateAgencies')\n                        vm.$emit('input', response.data?.agency?.agency_id)\n                        vm.isOpen = false\n                        vm.$store.dispatch(\"success\", \"Agency added successfully\");\n                    })\n                    .catch(function (error) {\n                        vm.errors = error.response.data.errors;\n                        vm.$store.dispatch(\"error\", error.response.data.message);\n                    });\n            },\n            focus: function () {\n                this.$refs.toggle.focus()\n            },\n\n            onToggle() {\n                if(this.isOpen) {\n                    this.isOpen = false\n                } else {\n                    this.open()\n                }\n            },\n            onKey(e) {\n                const KeyCode = e.KeyCode || e.which\n                if(!e.shiftKey && KeyCode !== 9 && !this.isOpen) {\n                    this.open()\n                }\n            },\n            open() {\n                this.fetchData('')\n                this.isOpen = true\n                this.$nextTick(() => {\n                    this.$refs.search.focus()\n                })\n            },\n            fetchData(query) {\n                let vm = this;\n                if(query==\"\") {\n                    vm.results = vm.data;\n                }\n                else {\n                    vm.results = vm.data.filter(function (el) {\n                        return el[vm.label].toLowerCase().includes(query.toLowerCase())\n                    });\n                \n                }\n            },\n            onBlur() {\n                this.close()\n            },\n            onEsc() {\n                this.close()\n            },\n            close() {\n                this.results = []\n                this.isOpen = false\n                this.search = ''\n                this.selectIndex = -1\n            },\n            onSearch(e) {\n                const q = e.target.value\n                this.selectIndex = 0\n                this.fetchData(q)\n            },\n            onUpKey() {\n                if(this.selectIndex > 0) {\n                    this.selectIndex--\n                }\n            },\n            onDownKey() {\n                if(this.results.length - 1 > this.selectIndex) {\n                    this.selectIndex++\n                }\n            },\n            onEnterKey() {\n                const found = this.results[this.selectIndex]\n                if(found) {\n                    this.select(found)\n                }\n            },\n            select(result) {\n                this.$emit('input', result[this.id])\n                this.close()\n            },\n            onMouse(index) {\n                this.selectIndex = index\n               \n             \n            }\n         }\n    }\n</script>\n\n<style>\n    .search {\n      position: relative;\n      display: block;\n      background: #fff;\n    }\n\n    .search-open {\n      border-bottom: 0;\n    }\n\n    .search-open .form-control {\n        background: #fff;\n        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n        border: 1px solid #f2f2f2;\n    }\n\n    .search-inner {\n        position: relative;\n    }\n\n    .search-selected {\n        cursor: pointer;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: -webkit-box !important;\n        display: -ms-flexbox !important;\n        display: flex !important;\n        -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n        justify-content: space-between;\n        line-height: 15px;\n    }\n\n    .agency-search-dropdown {\n      width: 200%;\n      position: absolute;\n      /* z-index: 999 !important; */\n      z-index:10000 !important;\n      padding: 5px;\n      background: #fff;\n      border-right: 1px solid #f2f2f2;\n      border-left: 1px solid #f2f2f2;\n      -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\n       overflow-y: scroll !important;\n      max-height: 300px !important;        \n    }\n\n    .search-input {\n      line-height: 13px;\n      font-size: 13px;\n      background: #fafafa;\n      border: none;\n      min-height: 10px !important;\n      border-radius: 1px;\n      -webkit-box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\n              box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\n      padding: 4px 4px;\n      width: 100%;\n      display: block;\n     \n    }\n\n    .search-input:focus {\n      outline-style: dotted;\n      outline-width: 1px;\n      outline-offset: 1px;\n    }\n\n    .search-input_wrap {\n      position: relative;\n    }\n\n    .search-list {\n      /* display: block; */\n      margin: 0;\n      padding: 0;\n    }\n\n    .search-link {\n      cursor: pointer;\n      padding: 2px;\n      background: #fff;\n    }\n\n    .search-active {\n      background: #3aa3e3 !important;\n      color: #fff;\n    }\n\n    .search-list td, th { \n        white-space: nowrap; \n        overflow: hidden; \n        text-overflow:ellipsis; \n    }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withKeys as _withKeys, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"search-inner\"\n};\nconst _hoisted_2 = [\"tabindex\", \"value\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"agency-search-dropdown\"\n};\nconst _hoisted_4 = {\n  class: \"search-input_wrap\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  class: \"table table-responsive-sm table-bordered table-striped table-sm search-list\"\n};\nconst _hoisted_7 = [\"onMousedown\", \"onMouseover\"];\nconst _hoisted_8 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([[$data.isOpen ? 'search search-open' : 'search'], \"dropdown-container\"])\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"input\", {\n    class: _normalizeClass([\"form-control form-control-sm search-selected\", $props.customClass]),\n    ref: \"toggle\",\n    tabindex: $props.tabindex,\n    value: $options.selectedText,\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.onToggle && $options.onToggle(...args)),\n    onKeydown: _cache[1] || (_cache[1] = (...args) => $options.onKey && $options.onKey(...args))\n  }, null, 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2), _createVNode(_Transition, {\n    name: \"fade\",\n    mode: \"out-in\"\n  }, {\n    default: _withCtx(() => [$data.isOpen ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control form-control-sm search-input\",\n      autocomplete: \"off\",\n      placeholder: \"Search...\",\n      ref: \"search\",\n      onBlur: _cache[2] || (_cache[2] = (...args) => $options.onBlur && $options.onBlur(...args)),\n      onInput: _cache[3] || (_cache[3] = (...args) => $options.onSearch && $options.onSearch(...args)),\n      onKeydown: [_cache[4] || (_cache[4] = _withKeys((...args) => $options.onEsc && $options.onEsc(...args), [\"esc\"])), _cache[5] || (_cache[5] = _withKeys((...args) => $options.onUpKey && $options.onUpKey(...args), [\"up\"])), _cache[6] || (_cache[6] = _withKeys((...args) => $options.onDownKey && $options.onDownKey(...args), [\"down\"])), _cache[7] || (_cache[7] = _withKeys((...args) => $options.onEnterKey && $options.onEnterKey(...args), [\"enter\"]))]\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)]), $data.results && $data.results.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"table\", _hoisted_6, [_createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.results, (result, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", {\n        class: _normalizeClass([\"search-item\", ['search-link', $data.selectIndex === index ? 'search-active' : '']]),\n        onMousedown: _withModifiers($event => $options.select(result), [\"prevent\"]),\n        onMouseover: _withModifiers($event => $options.onMouse(index), [\"prevent\"]),\n        key: index\n      }, [_createElementVNode(\"td\", null, _toDisplayString(result[$props.label]), 1 /* TEXT */)], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_7);\n    }), 128 /* KEYED_FRAGMENT */))])])])) : _createCommentVNode(\"v-if\", true), !$data.results.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n      class: \"btn btn-info btn-sm\",\n      onMousedown: _cache[8] || (_cache[8] = _withModifiers((...args) => $options.addAgency && $options.addAgency(...args), [\"prevent\"]))\n    }, \"Add Agency\", 32 /* NEED_HYDRATION */)])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })])], 2 /* CLASS */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_normalizeClass","$data","isOpen","_createElementVNode","_hoisted_1","$props","customClass","ref","tabindex","value","$options","selectedText","onClick","_cache","args","onToggle","onKeydown","onKey","_hoisted_2","_createVNode","_Transition","name","mode","default","_withCtx","_hoisted_3","_hoisted_4","type","autocomplete","placeholder","onBlur","onInput","onSearch","_withKeys","onEsc","onUpKey","onDownKey","onEnterKey","results","length","_hoisted_5","_hoisted_6","_Fragment","_renderList","result","index","selectIndex","onMousedown","_withModifiers","$event","select","onMouseover","onMouse","_toDisplayString","label","_hoisted_7","_createCommentVNode","_hoisted_8","addAgency","_"],"sources":["C:\\xampp\\htdocs\\bidsportal_new\\admin\\src\\components\\AgencySearch.vue"],"sourcesContent":["<template>\r\n    <div :class=\"[isOpen ? 'search search-open' : 'search']\" class=\"dropdown-container\">\r\n        <div class=\"search-inner\">\r\n            <input class=\"form-control form-control-sm search-selected\" \r\n                ref=\"toggle\" \r\n                :tabindex=\"tabindex\"\r\n                :value=\"selectedText\"\r\n                :class=\"customClass\"\r\n                @click=\"onToggle\"\r\n                @keydown=\"onKey\"\r\n            >\r\n            <transition name=\"fade\" mode=\"out-in\">\r\n                <div class=\"agency-search-dropdown\" v-if=\"isOpen\">\r\n                    <div class=\"search-input_wrap\">\r\n                        \r\n                        <input type=\"text\" class=\"form-control form-control-sm search-input\" autocomplete=\"off\" placeholder=\"Search...\"\r\n                            ref=\"search\" @blur=\"onBlur\"\r\n                            @input=\"onSearch\"\r\n                            @keydown.esc=\"onEsc\"\r\n                            @keydown.up=\"onUpKey\"\r\n                            @keydown.down=\"onDownKey\"\r\n                            @keydown.enter=\"onEnterKey\"\r\n                        >\r\n                    </div>\r\n                    <div v-if=\"results && results.length\">\r\n                        <table class=\"table table-responsive-sm table-bordered table-striped table-sm search-list\">\r\n                            <tbody>\r\n                                <tr class=\"search-item\" v-for=\"(result, index) in results\" @mousedown.prevent=\"select(result)\" @mouseover.prevent=\"onMouse(index)\" :class=\"['search-link', selectIndex === index ? 'search-active':'']\" :key=\"index\">\r\n                                    <td>\r\n                                    {{ result[label] }}\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <div v-if=\"!results.length\">\r\n                        <button class=\"btn btn-info btn-sm\" @mousedown.prevent=\"addAgency\">Add Agency</button>\r\n                    </div>\r\n                </div>\r\n            </transition>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n    export default {\r\n        props: {\r\n            customClass: {\r\n                default: ''\r\n            },\r\n            initialize: {\r\n                default: null\r\n            },\r\n            id: {\r\n                default: null\r\n            },\r\n            label: {\r\n                default: null\r\n            },\r\n            placeholder: {\r\n                default: \"Select One\"\r\n            },\r\n            data:{\r\n                default:null\r\n            },\r\n            tabindex: {\r\n                default: 0\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                selectIndex: -1,\r\n                isOpen: false,\r\n                search: '',\r\n                results: [],\r\n                query: {\r\n                    search: ''\r\n                },\r\n                temp:[],\r\n                agencies:[]\r\n            }\r\n        },\r\n        computed: {\r\n            selectedText() {\r\n                let vm =this\r\n                if(vm.initialize) {\r\n                    let result = vm.data.filter(function (el) {\r\n                        return el[vm.id]==vm.initialize\r\n                    });\r\n                    if(result && result.length!=0) {\r\n                        return result[0][vm.label]\r\n                    }\r\n                    else {\r\n                        return vm.placeholder;\r\n                    }\r\n                }\r\n                else {\r\n                    return vm.placeholder;\r\n                }\r\n            }\r\n        },\r\n        \r\n        methods: {\r\n            addAgency() {\r\n                let vm = this\r\n                let agency = {\r\n                    agency_name : this.initialize?.target?.value\r\n                }\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"addAgency\", data: agency })\r\n                    .then(function (response) {\r\n                        vm.$emit('updateAgencies')\r\n                        vm.$emit('input', response.data?.agency?.agency_id)\r\n                        vm.isOpen = false\r\n                        vm.$store.dispatch(\"success\", \"Agency added successfully\");\r\n                    })\r\n                    .catch(function (error) {\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n            focus: function () {\r\n                this.$refs.toggle.focus()\r\n            },\r\n\r\n            onToggle() {\r\n                if(this.isOpen) {\r\n                    this.isOpen = false\r\n                } else {\r\n                    this.open()\r\n                }\r\n            },\r\n            onKey(e) {\r\n                const KeyCode = e.KeyCode || e.which\r\n                if(!e.shiftKey && KeyCode !== 9 && !this.isOpen) {\r\n                    this.open()\r\n                }\r\n            },\r\n            open() {\r\n                this.fetchData('')\r\n                this.isOpen = true\r\n                this.$nextTick(() => {\r\n                    this.$refs.search.focus()\r\n                })\r\n            },\r\n            fetchData(query) {\r\n                let vm = this;\r\n                if(query==\"\") {\r\n                    vm.results = vm.data;\r\n                }\r\n                else {\r\n                    vm.results = vm.data.filter(function (el) {\r\n                        return el[vm.label].toLowerCase().includes(query.toLowerCase())\r\n                    });\r\n                \r\n                }\r\n            },\r\n            onBlur() {\r\n                this.close()\r\n            },\r\n            onEsc() {\r\n                this.close()\r\n            },\r\n            close() {\r\n                this.results = []\r\n                this.isOpen = false\r\n                this.search = ''\r\n                this.selectIndex = -1\r\n            },\r\n            onSearch(e) {\r\n                const q = e.target.value\r\n                this.selectIndex = 0\r\n                this.fetchData(q)\r\n            },\r\n            onUpKey() {\r\n                if(this.selectIndex > 0) {\r\n                    this.selectIndex--\r\n                }\r\n            },\r\n            onDownKey() {\r\n                if(this.results.length - 1 > this.selectIndex) {\r\n                    this.selectIndex++\r\n                }\r\n            },\r\n            onEnterKey() {\r\n                const found = this.results[this.selectIndex]\r\n                if(found) {\r\n                    this.select(found)\r\n                }\r\n            },\r\n            select(result) {\r\n                this.$emit('input', result[this.id])\r\n                this.close()\r\n            },\r\n            onMouse(index) {\r\n                this.selectIndex = index\r\n               \r\n             \r\n            }\r\n         }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .search {\r\n      position: relative;\r\n      display: block;\r\n      background: #fff;\r\n    }\r\n\r\n    .search-open {\r\n      border-bottom: 0;\r\n    }\r\n\r\n    .search-open .form-control {\r\n        background: #fff;\r\n        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n        border: 1px solid #f2f2f2;\r\n    }\r\n\r\n    .search-inner {\r\n        position: relative;\r\n    }\r\n\r\n    .search-selected {\r\n        cursor: pointer;\r\n        -webkit-user-select: none;\r\n        -moz-user-select: none;\r\n        -ms-user-select: none;\r\n        user-select: none;\r\n        display: -webkit-box !important;\r\n        display: -ms-flexbox !important;\r\n        display: flex !important;\r\n        -webkit-box-pack: justify;\r\n        -ms-flex-pack: justify;\r\n        justify-content: space-between;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .agency-search-dropdown {\r\n      width: 200%;\r\n      position: absolute;\r\n      /* z-index: 999 !important; */\r\n      z-index:10000 !important;\r\n      padding: 5px;\r\n      background: #fff;\r\n      border-right: 1px solid #f2f2f2;\r\n      border-left: 1px solid #f2f2f2;\r\n      -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n       overflow-y: scroll !important;\r\n      max-height: 300px !important;        \r\n    }\r\n\r\n    .search-input {\r\n      line-height: 13px;\r\n      font-size: 13px;\r\n      background: #fafafa;\r\n      border: none;\r\n      min-height: 10px !important;\r\n      border-radius: 1px;\r\n      -webkit-box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\r\n              box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\r\n      padding: 4px 4px;\r\n      width: 100%;\r\n      display: block;\r\n     \r\n    }\r\n\r\n    .search-input:focus {\r\n      outline-style: dotted;\r\n      outline-width: 1px;\r\n      outline-offset: 1px;\r\n    }\r\n\r\n    .search-input_wrap {\r\n      position: relative;\r\n    }\r\n\r\n    .search-list {\r\n      /* display: block; */\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n\r\n    .search-link {\r\n      cursor: pointer;\r\n      padding: 2px;\r\n      background: #fff;\r\n    }\r\n\r\n    .search-active {\r\n      background: #3aa3e3 !important;\r\n      color: #fff;\r\n    }\r\n\r\n    .search-list td, th { \r\n        white-space: nowrap; \r\n        overflow: hidden; \r\n        text-overflow:ellipsis; \r\n    }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
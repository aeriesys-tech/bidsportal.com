{"ast":null,"code":"import search from \"@/components/Search.vue\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nexport default {\n  components: {\n    // Pagination, \n    search\n  },\n  data() {\n    return {\n      tender: {\n        region: 'state',\n        country_id: '10',\n        state_id: '',\n        tender_no: '',\n        title: '',\n        description: '',\n        state_agency_id: '',\n        state_notice_id: '',\n        opening_date: '',\n        expiry_date: '',\n        tender_url: '',\n        fees: '',\n        category_id: '',\n        place_of_performance: {\n          city_name: '',\n          state_name: '',\n          country_name: ''\n        },\n        contracting_office_address: {\n          city: '',\n          state: '',\n          country: ''\n        },\n        primary_address: {\n          title: '',\n          full_name: '',\n          email: '',\n          phone: ''\n        },\n        secondary_address: {\n          title: '',\n          full_name: '',\n          email: '',\n          phone: ''\n        },\n        attachments: []\n      },\n      countries: [],\n      states: [],\n      notices: [],\n      categories: [],\n      agencies: [],\n      errors: [],\n      editor: ClassicEditor\n    };\n  },\n  mounted() {\n    this.getCountries();\n    if (this.tender.country_id) {\n      this.getStates();\n    }\n  },\n  methods: {\n    handleFileUpload(event) {\n      // console.log(event.target.files)\n      // event.target.files.map(function(element){\n      //     console.log(element)\n      // })\n      this.tender.attachments = event.target.files;\n\n      // let images = e.target.files\n      // let reader = new FileReader()\n      // let pr_images = []\n      // for(let i = 0; i<images.length; i++){\n      //     console.log(images[i].name)\n      //     reader.readAsDataURL(vm.images[i]);\n      //     reader.onload = (e) => {\n      //         let image_exists = pr_images.filter(function(image){\n      //             return image.name == vm.images[i].name\n      //         })\n      //         if(!image_exists.length){\n      //             pr_images.push({\n      //                 image:e.target.result,\n      //                 name:vm.images[i].name,\n      //                 note:'',\n      //                 file : vm.images[i]\n      //             })\n      //         }\n      //     };\n      // }\n    },\n    addTender() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      const formData = new FormData();\n      for (var i = 0; i < vm.tender.attachments.length; i++) {\n        formData.append('attachments[' + i + ']', vm.tender.attachments[i]);\n      }\n      formData.append('country_id', vm.tender.country_id);\n      formData.append('state_id', vm.tender.state_id);\n      formData.append('tender_no', vm.tender.tender_no);\n      formData.append('title', vm.tender.title);\n      formData.append('state_agency_id', vm.tender.state_agency_id);\n      formData.append('state_notice_id', vm.tender.state_notice_id);\n      formData.append('opening_date', vm.tender.opening_date);\n      formData.append('expiry_date', vm.tender.expiry_date);\n      formData.append('place_of_performance', JSON.stringify(vm.tender.place_of_performance));\n      formData.append('contracting_office_address', JSON.stringify(vm.tender.contracting_office_address));\n      formData.append('tender_url', vm.tender.tender_url);\n      formData.append('fees', vm.tender.fees);\n      formData.append('category', vm.tender.category);\n      formData.append('primary_address', JSON.stringify(vm.tender.primary_address));\n      formData.append('secondary_address', JSON.stringify(vm.tender.secondary_address));\n      vm.$store.dispatch(\"multipart_formdata\", {\n        uri: \"addStateTender\",\n        data: formData\n      }).then(response => {\n        loader.hide();\n        console.log(response);\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    handleCountryChange(country) {\n      this.tender.country_id = country;\n      if (typeof this.tender.country_id === 'number') {\n        this.getStates();\n      }\n    },\n    getCountries() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"getCountries\"\n      }).then(response => {\n        loader.hide();\n        vm.countries = response.data;\n        vm.getStateNotices();\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    getStates() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"getStates\",\n        data: vm.tender\n      }).then(response => {\n        loader.hide();\n        vm.states = response.data;\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    getStateNotices() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"getStateNotices\",\n        data: {\n          meta: {\n            region_id: 1\n          }\n        }\n      }).then(response => {\n        loader.hide();\n        vm.notices = response.data;\n        vm.getCategories();\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    getCategories() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"getCategories\"\n      }).then(response => {\n        loader.hide();\n        vm.categories = response.data;\n        vm.getStateAgencies();\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    getStateAgencies() {\n      let vm = this;\n      vm.$store.dispatch(\"post\", {\n        uri: \"getStateAgencies\"\n      }).then(response => {\n        vm.agencies = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["search","ClassicEditor","components","data","tender","region","country_id","state_id","tender_no","title","description","state_agency_id","state_notice_id","opening_date","expiry_date","tender_url","fees","category_id","place_of_performance","city_name","state_name","country_name","contracting_office_address","city","state","country","primary_address","full_name","email","phone","secondary_address","attachments","countries","states","notices","categories","agencies","errors","editor","mounted","getCountries","getStates","methods","handleFileUpload","event","target","files","addTender","vm","loader","$loading","show","formData","FormData","i","length","append","JSON","stringify","category","$store","dispatch","uri","then","response","hide","console","log","catch","error","message","handleCountryChange","getStateNotices","meta","region_id","getCategories","getStateAgencies"],"sources":["C:\\xampp\\htdocs\\bidsportal_new\\admin\\src\\views\\state_tenders\\Create.vue"],"sourcesContent":["<template>\r\n    <div class=\"container-fluid pb-3\">\r\n        <div class=\"d-flex justify-content-between\">\r\n            <h2 class=\"main-title mb-3\">New State Tender</h2>\r\n        </div>\r\n        <div class=\"row g-3\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <div class=\"d-sm-flex align-items-center justify-content-between\">\r\n                            <h6 class=\"card-title mb-0\"><strong>Add State Bid</strong></h6>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-body\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Region <span class=\"text-danger\">*</span></label>\r\n                                    <select class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.region }\" v-model=\"tender.region\">\r\n                                        <option value=\"state\">State</option>\r\n                                        <option value=\"federal\">Federal</option>\r\n                                        <option value=\"private\">Private/Commercial</option>\r\n                                        <option value=\"international\">International</option>\r\n                                    </select>\r\n                                    <span v-if=\"errors.region\" class=\"invalid-feedback\">{{ errors.region[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Country <span class=\"text-danger\">*</span></label>\r\n                                    <search :class=\"{ 'is-invalid': errors?.country_id }\"\r\n                                        :customClass=\"{ 'is-invalid': errors?.country_id }\" :initialize=\"tender.country_id\" id=\"country_id\"\r\n                                        label=\"country_name\" placeholder=\"Select Country\" :data=\"countries\" @input=\"country => handleCountryChange(country)\">\r\n                                    </search>\r\n                                    <span v-if=\"errors.country_id\" class=\"invalid-feedback\">{{ errors.country_id[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>State / Location Issued <span class=\"text-danger\">*</span></label>\r\n                                    <search :class=\"{ 'is-invalid': errors?.state_id }\"\r\n                                        :customClass=\"{ 'is-invalid': errors?.state_id }\" :initialize=\"tender.state_id\" id=\"state_id\"\r\n                                        label=\"state_name\" placeholder=\"Select State\" :data=\"states\" @input=\" state => tender.state_id = state\">\r\n                                    </search>\r\n                                    <span v-if=\"errors.state_id\" class=\"invalid-feedback\">{{ errors.state_id[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Bid / RFP Number <span class=\"text-danger\">*</span></label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.tender_no }\" v-model=\"tender.tender_no\" />\r\n                                    <span v-if=\"errors.tender_no\" class=\"invalid-feedback\">{{ errors.tender_no[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Bid Title <span class=\"text-danger\">*</span></label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.title }\" v-model=\"tender.title\" />\r\n                                    <span v-if=\"errors.title\" class=\"invalid-feedback\">{{ errors.title[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Issuing Agency </label>\r\n                                    <search :class=\"{ 'is-invalid': errors?.state_agency_id }\"\r\n                                        :customClass=\"{ 'is-invalid': errors?.state_agency_id }\" :initialize=\"tender.state_agency_id\" id=\"state_agency_id\"\r\n                                        label=\"state_agency_name\" placeholder=\"Select Agency\" :data=\"agencies\" @input=\" agency => tender.state_agency_id = agency\" @updateAgencies=\"updateAgencies\">\r\n                                    </search>\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.state_agency_id?.length\">{{ errors?.state_agency_id[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Notice </label>\r\n                                    <select class=\"form-control form-control-sm\" :class=\"{'is-invalid' : errors?.state_notice_id }\">\r\n                                        <option value=\"null\">Select Notice</option>\r\n                                        <option v-for=\"notice, notice_key in notices\" :key=\"notice_key\" :value=\"notice.state_notice_id\">{{ notice.notice_name }}</option>\r\n                                    </select>\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.state_notice_id?.length\">{{ errors?.state_notice_id[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Opening Date <span class=\"text-danger\">*</span></label>\r\n                                    <input type=\"date\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.opening_date }\" v-model=\"tender.opening_date\" />\r\n                                    <span v-if=\"errors.opening_date\" class=\"invalid-feedback\">{{ errors.opening_date[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Due Date <span class=\"text-danger\">*</span></label>\r\n                                    <input type=\"date\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.expiry_date }\" v-model=\"tender.expiry_date\" />\r\n                                    <span v-if=\"errors.expiry_date\" class=\"invalid-feedback\">{{ errors.expiry_date[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 margin_top\">Place of Performance</div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>City </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.place_of_performance?.city_name }\" v-model=\"tender.place_of_performance.city_name\" />\r\n                                    <span v-if=\"errors.place_of_performance?.city_name\" class=\"invalid-feedback\">{{ errors.place_of_performance?.city_name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>State </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.place_of_performance?.state_name }\" v-model=\"tender.place_of_performance.state_name\" />\r\n                                    <span v-if=\"errors.place_of_performance?.state_name\" class=\"invalid-feedback\">{{ errors.place_of_performance?.state_name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Country </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.place_of_performance?.country_name }\" v-model=\"tender.place_of_performance.country_name\" />\r\n                                    <span v-if=\"errors.place_of_performance?.country_name\" class=\"invalid-feedback\">{{ errors.place_of_performance?.country_name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 margin_top\">Contracting Office Address</div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>City </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.contracting_office_address?.city }\" v-model=\"tender.contracting_office_address.city\" />\r\n                                    <span v-if=\"errors.contracting_office_address?.city\" class=\"invalid-feedback\">{{ errors.contracting_office_address?.city[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>State </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.contracting_office_address?.state }\" v-model=\"tender.contracting_office_address.state\" />\r\n                                    <span v-if=\"errors.contracting_office_address?.state\" class=\"invalid-feedback\">{{ errors.contracting_office_address?.state[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Country </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.contracting_office_address?.country }\" v-model=\"tender.contracting_office_address.country\" />\r\n                                    <span v-if=\"errors.contracting_office_address?.country\" class=\"invalid-feedback\">{{ errors.contracting_office_address?.country[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Bid Posting Link </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.tender_url }\" v-model=\"tender.tender_url\" />\r\n                                    <span v-if=\"errors.tender_url\" class=\"invalid-feedback\">{{ errors.tender_url[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Single Download Fee </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.fees }\" v-model=\"tender.fees\" />\r\n                                    <span v-if=\"errors.fees\" class=\"invalid-feedback\">{{ errors.fees[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-4 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Category </label>\r\n                                    <search :class=\"{ 'is-invalid': errors?.category_id }\"\r\n                                        :customClass=\"{ 'is-invalid': errors?.category_id }\" :initialize=\"tender.category_id\" id=\"category_id\"\r\n                                        label=\"category_name\" placeholder=\"Select Category\" :data=\"categories\" @input=\" category => tender.category_id = category\">\r\n                                    </search>\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.category_id?.length\">{{ errors?.category_id[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Bid Description </label>\r\n                                    <ckeditor :editor=\"editor\" v-model=\"tender.description\"></ckeditor>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 margin_top\">Primary Address</div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Title </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.primary_address?.title }\" v-model=\"tender.primary_address.title\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.primary_address?.title?.length\">{{ errors?.primary_address?.title[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Full Name </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.primary_address?.full_name }\" v-model=\"tender.primary_address.full_name\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.primary_address?.full_name?.length\">{{ errors?.primary_address?.full_name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Email </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.primary_address?.email }\" v-model=\"tender.primary_address.email\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.primary_address?.email?.length\">{{ errors?.primary_address?.email[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Phone </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.primary_address?.phone }\" v-model=\"tender.primary_address.phone\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.primary_address?.phone?.length\">{{ errors?.primary_address?.phone[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-12 margin_top\">Secodary Address</div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Title </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.secondary_address?.title }\" v-model=\"tender.secondary_address.title\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.secondary_address?.title?.length\">{{ errors?.secondary_address?.title[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Full Name </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.secondary_address?.full_name }\" v-model=\"tender.secondary_address.full_name\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.secondary_address?.full_name?.length\">{{ errors?.secondary_address?.full_name[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Email </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.secondary_address?.email }\" v-model=\"tender.secondary_address.email\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.secondary_address?.email?.length\">{{ errors?.secondary_address?.email[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Phone </label>\r\n                                    <input type=\"text\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.secondary_address?.phone }\" v-model=\"tender.secondary_address.phone\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.secondary_address?.phone?.length\">{{ errors?.secondary_address?.phone[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-sm-3 margin_top\">\r\n                                <div class=\"form-group\">\r\n                                    <label>Attachments </label>\r\n                                    <input type=\"file\" class=\"form-control form-control-sm\" :class=\"{ 'is-invalid': errors.attachments }\" multiple @change=\"handleFileUpload($event)\" />\r\n                                    <span class=\"invalid-feedback\" v-if=\"errors?.attachments?.length\">{{ errors?.attachments[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-footer\">\r\n                        <div style=\"float:right\">\r\n                            <button class=\"btn btn-warning\">Discard</button>\r\n                            <button class=\"btn btn-primary\" style=\"margin-left:10px\" @click=\"addTender()\">Sumbit</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import search from \"@/components/Search.vue\";\r\n    import ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\n    export default {\r\n        components: {\r\n            // Pagination, \r\n            search\r\n        },\r\n        \r\n        data() {\r\n            return {\r\n                tender:{\r\n                    region : 'state',\r\n                    country_id :'10',\r\n                    state_id : '',\r\n                    tender_no : '',\r\n                    title : '',\r\n                    description: '',\r\n                    state_agency_id : '',\r\n                    state_notice_id : '',\r\n                    opening_date : '',\r\n                    expiry_date : '',\r\n                    tender_url: '',\r\n                    fees: '',\r\n                    category_id : '',\r\n                    place_of_performance: {\r\n                        city_name : '',\r\n                        state_name : '',\r\n                        country_name : ''\r\n                    },\r\n                    contracting_office_address : {\r\n                        city : '',\r\n                        state : '',\r\n                        country : ''\r\n                    },\r\n                    primary_address:{\r\n                        title:'',\r\n                        full_name:'',\r\n                        email:'',\r\n                        phone:''\r\n                    },\r\n                    secondary_address:{\r\n                        title:'',\r\n                        full_name:'',\r\n                        email:'',\r\n                        phone:''\r\n                    },\r\n                    attachments:[]\r\n                },\r\n                countries:[],\r\n                states:[],\r\n                notices:[],\r\n                categories:[],\r\n                agencies:[],\r\n                errors:[],\r\n                editor: ClassicEditor,\r\n            };\r\n        },\r\n        mounted() {\r\n            this.getCountries() \r\n            if(this.tender.country_id){\r\n                this.getStates()\r\n            }\r\n        },\r\n        methods: {\r\n                                 \r\n            handleFileUpload(event) {\r\n                // console.log(event.target.files)\r\n                // event.target.files.map(function(element){\r\n                //     console.log(element)\r\n                // })\r\n                this.tender.attachments = event.target.files\r\n\r\n                // let images = e.target.files\r\n                // let reader = new FileReader()\r\n                // let pr_images = []\r\n                // for(let i = 0; i<images.length; i++){\r\n                //     console.log(images[i].name)\r\n                //     reader.readAsDataURL(vm.images[i]);\r\n                //     reader.onload = (e) => {\r\n                //         let image_exists = pr_images.filter(function(image){\r\n                //             return image.name == vm.images[i].name\r\n                //         })\r\n                //         if(!image_exists.length){\r\n                //             pr_images.push({\r\n                //                 image:e.target.result,\r\n                //                 name:vm.images[i].name,\r\n                //                 note:'',\r\n                //                 file : vm.images[i]\r\n                //             })\r\n                //         }\r\n                //     };\r\n                // }\r\n            },\r\n            addTender() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                const formData = new FormData();\r\n                for (var i = 0; i < vm.tender.attachments.length; i++ ){\r\n                    formData.append('attachments[' + i + ']', vm.tender.attachments[i])\r\n                }\r\n                formData.append('country_id', vm.tender.country_id)\r\n                formData.append('state_id', vm.tender.state_id)\r\n                formData.append('tender_no', vm.tender.tender_no)\r\n                formData.append('title', vm.tender.title)\r\n                formData.append('state_agency_id', vm.tender.state_agency_id)\r\n                formData.append('state_notice_id', vm.tender.state_notice_id)\r\n                formData.append('opening_date', vm.tender.opening_date)\r\n                formData.append('expiry_date', vm.tender.expiry_date)\r\n                formData.append('place_of_performance', JSON.stringify(vm.tender.place_of_performance))\r\n                formData.append('contracting_office_address', JSON.stringify(vm.tender.contracting_office_address))\r\n                formData.append('tender_url', vm.tender.tender_url)\r\n                formData.append('fees', vm.tender.fees)\r\n                formData.append('category', vm.tender.category)\r\n                formData.append('primary_address', JSON.stringify(vm.tender.primary_address))\r\n                formData.append('secondary_address', JSON.stringify(vm.tender.secondary_address))                    \r\n                \r\n                vm.$store\r\n                    .dispatch(\"multipart_formdata\", { uri: \"addStateTender\", data: formData })\r\n                    .then((response) => {\r\n                        loader.hide();\r\n                        console.log(response)\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            handleCountryChange(country) {\r\n                this.tender.country_id = country\r\n                if(typeof this.tender.country_id === 'number'){\r\n                    this.getStates()\r\n                }\r\n            },                        \r\n            getCountries() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"getCountries\" })\r\n                    .then((response) => {\r\n                        loader.hide();\r\n                        vm.countries = response.data\r\n                        vm.getStateNotices()\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            getStates() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"getStates\", data:vm.tender })\r\n                    .then((response) => {\r\n                        loader.hide();\r\n                        vm.states = response.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            getStateNotices() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"getStateNotices\", data:{ meta:{region_id:1}} })\r\n                    .then((response) => {\r\n                        loader.hide();\r\n                        vm.notices = response.data\r\n                        vm.getCategories()\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            getCategories() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"getCategories\" })\r\n                    .then((response) => {\r\n                        loader.hide();\r\n                        vm.categories = response.data\r\n                        vm.getStateAgencies()\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            getStateAgencies() {\r\n                let vm = this;\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"getStateAgencies\" })\r\n                    .then((response) => {\r\n                        vm.agencies = response.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        console.log(error)\r\n                    });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style scoped>\r\n    .margin_top{   \r\n        margin-top: 20px;\r\n    }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
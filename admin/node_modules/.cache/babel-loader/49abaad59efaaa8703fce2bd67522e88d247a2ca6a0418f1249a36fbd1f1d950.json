{"ast":null,"code":"export default {\n  name: \"Profile\",\n  data() {\n    return {\n      status: true,\n      user: {\n        user_id: \"\",\n        name: \"\",\n        email: \"\",\n        role: {\n          role_name: \"\"\n        },\n        mobile_no: \"\",\n        address: \"\",\n        current_password: \"\",\n        new_password: \"\",\n        confirm_password: \"\"\n      },\n      roles: [],\n      users: [],\n      errors: []\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.user.user_id = vm.$store.getters.user?.user_id;\n      let loader = vm.$loading.show();\n      let uri = {\n        uri: \"me\",\n        data: vm.user\n      };\n      vm.$store.dispatch(\"post\", uri).then(function (response) {\n        loader.hide();\n        vm.user = response.data.data;\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    });\n  },\n  methods: {\n    test(password, field_name) {\n      console.log(\"key\", password, field_name);\n      let vm = this;\n      if (field_name == \"current_password\") {\n        vm.errors.current_password = \"\";\n      }\n      if (field_name == \"new_password\") {\n        vm.errors.new_password = \"\";\n      }\n      if (field_name == \"confirm_password\") {\n        vm.errors.confirm_password = \"\";\n      }\n    },\n    updateProfile() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      let data = new FormData();\n      data.append(\"name\", this.user.name);\n      data.append(\"email\", this.user.email);\n      data.append(\"mobile_no\", this.user.mobile_no);\n      data.append(\"avatar\", this.image);\n      data.append(\"role_id\", this.user.role_id);\n      data.append(\"address\", this.user.address);\n      vm.$store.dispatch(\"post\", {\n        uri: \"updateProfile\",\n        data: data\n      }).then(function (response) {\n        console.log(response.data);\n        loader.hide();\n        vm.$store.dispatch(\"success\", \"Profile is successfully updated\");\n        vm.$store.dispatch(\"setUser\", response.data.data);\n        vm.errors = [];\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    updatePassword() {\n      let vm = this;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"updatePassword\",\n        data: vm.user\n      }).then(function () {\n        loader.hide();\n        vm.$store.dispatch(\"success\", \"Password is successfully updated\");\n        // vm.$router.push('/');\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    onImageChange(e) {\n      // e.preventDefault();\n      let vm = this;\n      vm.image = e.target.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(vm.image);\n      reader.onload = e => {\n        vm.user.avatar = e.target.result;\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","data","status","user","user_id","email","role","role_name","mobile_no","address","current_password","new_password","confirm_password","roles","users","errors","beforeRouteEnter","to","from","next","vm","$store","getters","loader","$loading","show","uri","dispatch","then","response","hide","catch","error","message","methods","test","password","field_name","console","log","updateProfile","FormData","append","image","role_id","updatePassword","onImageChange","e","target","files","reader","FileReader","readAsDataURL","onload","avatar","result"],"sources":["C:\\xampp\\htdocs\\bidsportal_new\\admin\\src\\views\\auth\\Profile.vue"],"sourcesContent":["<template>\r\n    <div class=\"\">\r\n        <h2 class=\"main-title mb-3\">User Details</h2>\r\n        <div class=\"row g-3\">\r\n            <div class=\"col-md-8\">\r\n                <form @submit.prevent=\"updateProfile\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-md-4\">\r\n                            <div class=\"card\">\r\n                                <div class=\"card-header\">\r\n                                    <strong>Update Avatar</strong>\r\n                                </div>\r\n                                <div class=\"card-body\">\r\n                                    <div class=\"text-center\" v-if=\"user.avatar\">\r\n                                        <img width=\"200\" :src=\"user.avatar?user.avatar:'@/assets/deafult_user_image.png'\" alt=\"user image\" />\r\n                                    </div>\r\n                                    <div class=\"form-group\">\r\n                                        <label class=\"form-label\" for=\"customFile\">Choose file</label>\r\n                                        <input type=\"file\" class=\"form-control\" id=\"customFile\" :class=\"{'is-invalid': errors.avatar}\" @change=\"onImageChange($event)\" accept=\"image/*\" />\r\n                                    </div>\r\n                                    <span v-if=\"errors.avatar\" class=\"invalid-feedback\">{{ errors.avatar[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-md-8\">\r\n                            <div class=\"card\">\r\n                                <div class=\"card-header\">\r\n                                    <strong>Profile Details</strong>\r\n                                </div>\r\n                                <div class=\"card-body mb-3\">\r\n                                    <div class=\"row g-3\">\r\n                                        <div class=\"col-sm-6\">\r\n                                            <label class=\"form-label\">Name</label><span class=\"text-danger\"> *</span>\r\n                                            <input type=\"text\" placeholder=\"Name\" class=\"form-control\" :class=\"{'is-invalid': errors.name}\" v-model=\"user.name\" ref=\"name\" />\r\n                                            <span v-if=\"errors.name\" class=\"invalid-feedback\">{{ errors.name[0] }}</span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-6\">\r\n                                            <label class=\"form-label\">Email</label><span class=\"text-danger\"> *</span>\r\n                                            <input type=\"email\" placeholder=\"Email\" class=\"form-control\" :class=\"{'is-invalid': errors.email}\" v-model=\"user.email\" />\r\n                                            <span v-if=\"errors.email\" class=\"invalid-feedback\">{{ errors.email[0] }}</span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-6\">\r\n                                            <label class=\"form-label\">Role</label>\r\n                                            <input type=\"text\" placeholder=\"Role\" class=\"form-control\" :class=\"{'is-invalid': errors.role_name}\" v-model=\"user.role.role_name\" readonly />\r\n                                            <span v-if=\"errors.role_name\" class=\"invalid-feedback\">{{ errors.role_name[0] }}</span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-6\">\r\n                                            <label class=\"form-label\">Mobile No.</label>\r\n                                            <input type=\"text\" placeholder=\"Mobile No.\" class=\"form-control\" :class=\"{'is-invalid': errors.mobile_no}\" v-model=\"user.mobile_no\" />\r\n                                            <span v-if=\"errors.mobile_no\" class=\"invalid-feedback\">{{ errors.mobile_no[0] }}</span>\r\n                                        </div>\r\n                                        <div class=\"col-sm-12\">\r\n                                            <label class=\"form-label\">Address</label>\r\n                                            <textarea type=\"text\" placeholder=\"Address\" class=\"form-control\" :class=\"{'is-invalid': errors.address}\" v-model=\"user.address\"></textarea>\r\n                                            <span v-if=\"errors.address\" class=\"invalid-feedback\">{{ errors.address[0] }}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"card-footer text-end\">\r\n                                    <button type=\"submit\" class=\"btn btn-primary\"><i class=\"ri-save-line icon_hgt\"></i> Update</button>\r\n                                    <!-- <button type=\"submit\" class=\"btn btn-danger\">Discard</button> -->\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class=\"col-md-4\">\r\n                <div class=\"card\">\r\n                    <form @submit.prevent=\"updatePassword\">\r\n                        <div class=\"card-header\">\r\n                            <strong>Change Password</strong>\r\n                        </div>\r\n                        <div class=\"card-body mb-3\">\r\n                            <!-- <h5>New Area</h5> -->\r\n                            <div class=\"row g-3\">\r\n                                <div class=\"col-sm-12\">\r\n                                    <label class=\"form-label\">Current Password</label><span class=\"text-danger\"> *</span>\r\n                                    <input type=\"password\" placeholder=\"Current Password\" class=\"form-control\" :class=\"{'is-invalid': errors.current_password}\" v-model=\"user.current_password\" @keyup=\"test(user.current_password,'current_password')\" />\r\n                                    <span v-if=\"errors.current_password\" class=\"invalid-feedback\">{{ errors.current_password[0] }}</span>\r\n                                </div>\r\n                                <div class=\"col-sm-12\">\r\n                                    <label class=\"form-label\">New Password</label><span class=\"text-danger\"> *</span>\r\n                                    <input type=\"password\" placeholder=\"New Password\" class=\"form-control\" :class=\"{'is-invalid': errors.new_password}\" v-model=\"user.new_password\" @keyup=\"test(user.new_password,'new_password')\" />\r\n                                    <span v-if=\"errors.new_password\" class=\"invalid-feedback\">{{ errors.new_password[0] }}</span>\r\n                                </div>\r\n                                <div class=\"col-sm-12\">\r\n                                    <label class=\"form-label\">Confirm Password</label><span class=\"text-danger\"> *</span>\r\n                                    <input type=\"password\" placeholder=\"Confirm Password\" class=\"form-control\" :class=\"{'is-invalid': errors.confirm_password}\" v-model=\"user.confirm_password\" @keyup=\"test(user.confirm_password,'confirm_password')\"/>\r\n                                    <span v-if=\"errors.confirm_password\" class=\"invalid-feedback\">{{ errors.confirm_password[0] }}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-footer text-end\">\r\n                            <button type=\"submit\" class=\"btn btn-primary me-2\"><i class=\"ri-save-line icon_hgt\"></i> Update</button>\r\n                            <!-- <button type=\"submit\" class=\"btn btn-danger\">Discard</button> -->\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- card -->\r\n    </div>\r\n    <!-- container -->\r\n</template>\r\n<script>\r\n    export default {\r\n        name: \"Profile\",\r\n        data() {\r\n            return {\r\n                status: true,\r\n                user: {\r\n                    user_id: \"\",\r\n                    name: \"\",\r\n                    email: \"\",\r\n                    role: {\r\n                        role_name: \"\",\r\n                    },\r\n                    mobile_no: \"\",\r\n                    address: \"\",\r\n                    current_password: \"\",\r\n                    new_password: \"\",\r\n                    confirm_password: \"\",\r\n                },\r\n                roles: [],\r\n                users: [],\r\n                errors: [],\r\n            };\r\n        },\r\n\r\n        beforeRouteEnter(to, from, next) {\r\n            next((vm) => {\r\n                vm.user.user_id = vm.$store.getters.user?.user_id;\r\n                let loader = vm.$loading.show();\r\n                let uri = { uri: \"me\", data: vm.user };\r\n                vm.$store\r\n                    .dispatch(\"post\", uri)\r\n                    .then(function (response) {\r\n                        loader.hide();\r\n                        vm.user = response.data.data;\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            });\r\n        },\r\n        methods: {\r\n            test( password,field_name){\r\n                console.log(\"key\", password,field_name)\r\n                let vm = this;\r\n                if(field_name==\"current_password\"){\r\n                    vm.errors.current_password=\"\";\r\n                }\r\n\r\n                if(field_name==\"new_password\"){\r\n                    vm.errors.new_password=\"\";\r\n                }\r\n               \r\n                if(field_name==\"confirm_password\"){\r\n                    vm.errors.confirm_password=\"\";\r\n                }\r\n                \r\n            },\r\n            updateProfile() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                let data = new FormData();\r\n                data.append(\"name\", this.user.name);\r\n                data.append(\"email\", this.user.email);\r\n                data.append(\"mobile_no\", this.user.mobile_no);\r\n                data.append(\"avatar\", this.image);\r\n                data.append(\"role_id\", this.user.role_id);\r\n                data.append(\"address\", this.user.address);\r\n\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"updateProfile\", data: data })\r\n                    .then(function (response) {\r\n                        console.log(response.data);\r\n                        loader.hide();\r\n                        vm.$store.dispatch(\"success\", \"Profile is successfully updated\");\r\n                        vm.$store.dispatch(\"setUser\", response.data.data);\r\n                        vm.errors = [];\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n\r\n            updatePassword() {\r\n                let vm = this;\r\n                let loader = vm.$loading.show();\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"updatePassword\", data: vm.user })\r\n                    .then(function () {\r\n                        loader.hide();\r\n                        vm.$store.dispatch(\"success\", \"Password is successfully updated\");\r\n                        // vm.$router.push('/');\r\n                    })\r\n                    .catch(function (error) {\r\n                        loader.hide();\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n            onImageChange(e) {\r\n                // e.preventDefault();\r\n                let vm = this;\r\n                vm.image = e.target.files[0];\r\n                let reader = new FileReader();\r\n                reader.readAsDataURL(vm.image);\r\n                reader.onload = (e) => {\r\n                    vm.user.avatar = e.target.result;\r\n                };\r\n            },\r\n           \r\n        },\r\n    };\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
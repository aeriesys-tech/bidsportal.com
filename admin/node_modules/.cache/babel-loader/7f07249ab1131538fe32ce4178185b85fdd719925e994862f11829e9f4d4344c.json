{"ast":null,"code":"export default {\n  name: \"Profile\",\n  data() {\n    return {\n      status: true,\n      user: {\n        user_id: \"\",\n        name: \"\",\n        email: \"\",\n        role: {\n          role_name: \"\"\n        },\n        mobile_no: \"\",\n        address: \"\",\n        current_password: \"\",\n        new_password: \"\",\n        confirm_password: \"\"\n      },\n      roles: [],\n      users: [],\n      errors: []\n    };\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.user.admin_id = vm.$store.getters.user?.admin_id;\n      let loader = vm.$loading.show();\n      let uri = {\n        uri: \"meAdmin\",\n        data: vm.user\n      };\n      vm.$store.dispatch(\"post\", uri).then(function (response) {\n        loader.hide();\n        vm.user = response.data.data;\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    });\n  },\n  methods: {\n    test(password, field_name) {\n      console.log(\"key\", password, field_name);\n      let vm = this;\n      if (field_name == \"current_password\") {\n        vm.errors.current_password = \"\";\n      }\n      if (field_name == \"new_password\") {\n        vm.errors.new_password = \"\";\n      }\n      if (field_name == \"confirm_password\") {\n        vm.errors.confirm_password = \"\";\n      }\n    },\n    updateProfile() {\n      let vm = this;\n      vm.user.admin_id = vm.$store.getters.user?.admin_id;\n      let loader = vm.$loading.show();\n      let data = new FormData();\n      data.append(\"first_name\", this.user.first_name);\n      data.append(\"email\", this.user.email);\n      data.append(\"mobile1\", this.user.mobile1);\n      data.append(\"avatar\", this.image);\n      data.append(\"role\", this.user.role);\n      data.append(\"address\", this.user.address);\n      vm.$store.dispatch(\"post\", {\n        uri: \"updateAdminProfile\",\n        data: vm.user\n      }).then(function (response) {\n        console.log(response.data);\n        loader.hide();\n        vm.$store.dispatch(\"success\", \"Profile is successfully updated\");\n        vm.$store.dispatch(\"setUser\", response.data.data);\n        vm.errors = [];\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    updatePassword() {\n      let vm = this;\n      vm.user.admin_id = vm.$store.getters.user?.admin_id;\n      let loader = vm.$loading.show();\n      vm.$store.dispatch(\"post\", {\n        uri: \"updateAdminPassword\",\n        data: vm.user\n      }).then(function () {\n        loader.hide();\n        vm.$store.dispatch(\"success\", \"Password is successfully updated\");\n        // vm.$router.push('/');\n      }).catch(function (error) {\n        loader.hide();\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    onImageChange(e) {\n      // e.preventDefault();\n      let vm = this;\n      vm.image = e.target.files[0];\n      let reader = new FileReader();\n      reader.readAsDataURL(vm.image);\n      reader.onload = e => {\n        vm.user.avatar = e.target.result;\n      };\n    }\n  }\n};","map":{"version":3,"names":["name","data","status","user","user_id","email","role","role_name","mobile_no","address","current_password","new_password","confirm_password","roles","users","errors","beforeRouteEnter","to","from","next","vm","admin_id","$store","getters","loader","$loading","show","uri","dispatch","then","response","hide","catch","error","message","methods","test","password","field_name","console","log","updateProfile","FormData","append","first_name","mobile1","image","updatePassword","onImageChange","e","target","files","reader","FileReader","readAsDataURL","onload","avatar","result"],"sources":["/private/var/www/html/bidsportal.com/admin/src/views/auth/Profile.vue"],"sourcesContent":["<template>\n    <div class=\"\">\n        <h2 class=\"main-title mb-3\">User Details</h2>\n        <div class=\"row g-3\">\n            <div class=\"col-md-8\">\n                <form @submit.prevent=\"updateProfile\">\n                    <div class=\"row\">\n                        <div class=\"col-md-4\">\n                            <div class=\"card\">\n                                <!-- <div class=\"card-header\">\n                                    <strong>Update Avatar</strong>\n                                </div> -->\n                                <!-- <div class=\"card-body\">\n                                    <div class=\"text-center\" v-if=\"user.avatar\">\n                                        <img width=\"200\" :src=\"user.avatar?user.avatar:'@/assets/deafult_user_image.png'\" alt=\"user image\" />\n                                    </div>\n                                    <div class=\"form-group\">\n                                        <label class=\"form-label\" for=\"customFile\">Choose file</label>\n                                        <input type=\"file\" class=\"form-control\" id=\"customFile\" :class=\"{'is-invalid': errors.avatar}\" @change=\"onImageChange($event)\" accept=\"image/*\" />\n                                    </div>\n                                    <span v-if=\"errors.avatar\" class=\"invalid-feedback\">{{ errors.avatar[0] }}</span>\n                                </div> -->\n                            </div>\n                        </div>\n                        <div class=\"col-md-8\">\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <strong>Profile Details</strong>\n                                </div>\n                                <div class=\"card-body mb-3\">\n                                    <div class=\"row g-3\">\n                                        <div class=\"col-sm-6\">\n                                            <label class=\"form-label\">Name</label><span class=\"text-danger\"> *</span>\n                                            <input type=\"text\" placeholder=\"Name\" class=\"form-control\" :class=\"{'is-invalid': errors.first_name}\" v-model=\"user.first_name\" ref=\"name\" />\n                                            <span v-if=\"errors.first_name\" class=\"invalid-feedback\">{{ errors.first_name[0] }}</span>\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            <label class=\"form-label\">Email</label><span class=\"text-danger\"> *</span>\n                                            <input type=\"email\" placeholder=\"Email\" class=\"form-control\" :class=\"{'is-invalid': errors.email}\" v-model=\"user.email\" />\n                                            <span v-if=\"errors.email\" class=\"invalid-feedback\">{{ errors.email[0] }}</span>\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            <label class=\"form-label\">Role</label>\n                                            <input type=\"text\" placeholder=\"Role\" class=\"form-control\" :class=\"{'is-invalid': errors.role}\" v-model=\"user.role\" readonly />\n                                            <span v-if=\"errors.role\" class=\"invalid-feedback\">{{ errors.role[0] }}</span>\n                                        </div>\n                                        <div class=\"col-sm-6\">\n                                            <label class=\"form-label\">Mobile No.</label>\n                                            <input type=\"text\" placeholder=\"Mobile No.\" class=\"form-control\" :class=\"{'is-invalid': errors.mobile1}\" v-model=\"user.mobile1\" />\n                                            <span v-if=\"errors.mobile1\" class=\"invalid-feedback\">{{ errors.mobile1[0] }}</span>\n                                        </div>\n                                        <!-- <div class=\"col-sm-12\">\n                                            <label class=\"form-label\">Address</label>\n                                            <textarea type=\"text\" placeholder=\"Address\" class=\"form-control\" :class=\"{'is-invalid': errors.address}\" v-model=\"user.address\"></textarea>\n                                            <span v-if=\"errors.address\" class=\"invalid-feedback\">{{ errors.address[0] }}</span>\n                                        </div> -->\n                                    </div>\n                                </div>\n                                <div class=\"card-footer text-end\">\n                                    <button type=\"submit\" class=\"btn btn-primary\"><i class=\"ri-save-line icon_hgt\"></i> Update</button>\n                                    <!-- <button type=\"submit\" class=\"btn btn-danger\">Discard</button> -->\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div class=\"col-md-4\">\n                <div class=\"card\">\n                    <form @submit.prevent=\"updatePassword\">\n                        <div class=\"card-header\">\n                            <strong>Change Password</strong>\n                        </div>\n                        <div class=\"card-body mb-3\">\n                            <!-- <h5>New Area</h5> -->\n                            <div class=\"row g-3\">\n                                <div class=\"col-sm-12\">\n                                    <label class=\"form-label\">Current Password</label><span class=\"text-danger\"> *</span>\n                                    <input type=\"password\" placeholder=\"Current Password\" class=\"form-control\" :class=\"{'is-invalid': errors.current_password}\" v-model=\"user.current_password\" @keyup=\"test(user.current_password,'current_password')\" />\n                                    <span v-if=\"errors.current_password\" class=\"invalid-feedback\">{{ errors.current_password[0] }}</span>\n                                </div>\n                                <div class=\"col-sm-12\">\n                                    <label class=\"form-label\">New Password</label><span class=\"text-danger\"> *</span>\n                                    <input type=\"password\" placeholder=\"New Password\" class=\"form-control\" :class=\"{'is-invalid': errors.new_password}\" v-model=\"user.new_password\" @keyup=\"test(user.new_password,'new_password')\" />\n                                    <span v-if=\"errors.new_password\" class=\"invalid-feedback\">{{ errors.new_password[0] }}</span>\n                                </div>\n                                <div class=\"col-sm-12\">\n                                    <label class=\"form-label\">Confirm Password</label><span class=\"text-danger\"> *</span>\n                                    <input type=\"password\" placeholder=\"Confirm Password\" class=\"form-control\" :class=\"{'is-invalid': errors.confirm_password}\" v-model=\"user.confirm_password\" @keyup=\"test(user.confirm_password,'confirm_password')\"/>\n                                    <span v-if=\"errors.confirm_password\" class=\"invalid-feedback\">{{ errors.confirm_password[0] }}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"card-footer text-end\">\n                            <button type=\"submit\" class=\"btn btn-primary me-2\"><i class=\"ri-save-line icon_hgt\"></i> Update</button>\n                            <!-- <button type=\"submit\" class=\"btn btn-danger\">Discard</button> -->\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n\n        <!-- card -->\n    </div>\n    <!-- container -->\n</template>\n<script>\n    export default {\n        name: \"Profile\",\n        data() {\n            return {\n                status: true,\n                user: {\n                    user_id: \"\",\n                    name: \"\",\n                    email: \"\",\n                    role: {\n                        role_name: \"\",\n                    },\n                    mobile_no: \"\",\n                    address: \"\",\n                    current_password: \"\",\n                    new_password: \"\",\n                    confirm_password: \"\",\n                },\n                roles: [],\n                users: [],\n                errors: [],\n            };\n        },\n\n        beforeRouteEnter(to, from, next) {\n            next((vm) => {\n                vm.user.admin_id = vm.$store.getters.user?.admin_id;\n                let loader = vm.$loading.show();\n                let uri = { uri: \"meAdmin\", data: vm.user };\n                vm.$store\n                    .dispatch(\"post\", uri)\n                    .then(function (response) {\n                        loader.hide();\n                        vm.user = response.data.data;\n                    })\n                    .catch(function (error) {\n                        loader.hide();\n                        vm.errors = error.response.data.errors;\n                        vm.$store.dispatch(\"error\", error.response.data.message);\n                    });\n            });\n        },\n        methods: {\n            test( password,field_name){\n                console.log(\"key\", password,field_name)\n                let vm = this;\n                if(field_name==\"current_password\"){\n                    vm.errors.current_password=\"\";\n                }\n\n                if(field_name==\"new_password\"){\n                    vm.errors.new_password=\"\";\n                }\n               \n                if(field_name==\"confirm_password\"){\n                    vm.errors.confirm_password=\"\";\n                }\n                \n            },\n            updateProfile() {\n                let vm = this;\n                vm.user.admin_id = vm.$store.getters.user?.admin_id;\n                let loader = vm.$loading.show();\n                let data = new FormData();\n                data.append(\"first_name\", this.user.first_name);\n                data.append(\"email\", this.user.email);\n                data.append(\"mobile1\", this.user.mobile1);\n                data.append(\"avatar\", this.image);\n                data.append(\"role\", this.user.role);\n                data.append(\"address\", this.user.address);\n\n                vm.$store\n                \n                    .dispatch(\"post\", { uri: \"updateAdminProfile\", data: vm.user })\n                    .then(function (response) {\n                        console.log(response.data);\n                        loader.hide();\n                        vm.$store.dispatch(\"success\", \"Profile is successfully updated\");\n                        vm.$store.dispatch(\"setUser\", response.data.data);\n                        vm.errors = [];\n                    })\n                    .catch(function (error) {\n                        loader.hide();\n                        vm.errors = error.response.data.errors;\n                        vm.$store.dispatch(\"error\", error.response.data.message);\n                    });\n            },\n\n            updatePassword() {\n                let vm = this;\n                vm.user.admin_id = vm.$store.getters.user?.admin_id;\n                let loader = vm.$loading.show();\n                vm.$store\n                    .dispatch(\"post\", { uri: \"updateAdminPassword\", data: vm.user })\n                    .then(function () {\n                        loader.hide();\n                        vm.$store.dispatch(\"success\", \"Password is successfully updated\");\n                        // vm.$router.push('/');\n                    })\n                    .catch(function (error) {\n                        loader.hide();\n                        vm.errors = error.response.data.errors;\n                        vm.$store.dispatch(\"error\", error.response.data.message);\n                    });\n            },\n            onImageChange(e) {\n                // e.preventDefault();\n                let vm = this;\n                vm.image = e.target.files[0];\n                let reader = new FileReader();\n                reader.readAsDataURL(vm.image);\n                reader.onload = (e) => {\n                    vm.user.avatar = e.target.result;\n                };\n            },\n           \n        },\n    };\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
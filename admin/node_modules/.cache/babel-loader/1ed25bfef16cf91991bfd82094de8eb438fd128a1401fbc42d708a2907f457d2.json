{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nexport default {\n  props: {\n    customClass: {\n      default: ''\n    },\n    initialize: {\n      default: null\n    },\n    id: {\n      default: null\n    },\n    label: {\n      default: null\n    },\n    placeholder: {\n      default: \"Select One\"\n    },\n    data: {\n      default: null\n    },\n    tabindex: {\n      default: 0\n    }\n  },\n  data() {\n    return {\n      selectIndex: -1,\n      isOpen: false,\n      search: '',\n      results: [],\n      query: {\n        search: ''\n      },\n      temp: [],\n      agencies: []\n    };\n  },\n  computed: {\n    selectedText() {\n      let vm = this;\n      if (vm.initialize) {\n        let result = vm.data.filter(function (el) {\n          return el[vm.id] == vm.initialize;\n        });\n        if (result && result.length != 0) {\n          return result[0][vm.label];\n        } else {\n          return vm.placeholder;\n        }\n      } else {\n        return vm.placeholder;\n      }\n    }\n  },\n  methods: {\n    addAgency() {\n      let vm = this;\n      let agency = {\n        agency_name: this.initialize?.target?.value\n      };\n      vm.$store.dispatch(\"post\", {\n        uri: \"addAgency\",\n        data: agency\n      }).then(function (response) {\n        vm.$emit('updateAgencies');\n        vm.$emit('input', response.data?.agency?.agency_id);\n        vm.isOpen = false;\n        vm.$store.dispatch(\"success\", \"Agency added successfully\");\n      }).catch(function (error) {\n        vm.errors = error.response.data.errors;\n        vm.$store.dispatch(\"error\", error.response.data.message);\n      });\n    },\n    focus: function () {\n      this.$refs.toggle.focus();\n    },\n    onToggle() {\n      if (this.isOpen) {\n        this.isOpen = false;\n      } else {\n        this.open();\n      }\n    },\n    onKey(e) {\n      const KeyCode = e.KeyCode || e.which;\n      if (!e.shiftKey && KeyCode !== 9 && !this.isOpen) {\n        this.open();\n      }\n    },\n    open() {\n      this.fetchData('');\n      this.isOpen = true;\n      this.$nextTick(() => {\n        this.$refs.search.focus();\n      });\n    },\n    fetchData(query) {\n      let vm = this;\n      if (query == \"\") {\n        vm.results = vm.data;\n      } else {\n        vm.results = vm.data.filter(function (el) {\n          return el[vm.label].toLowerCase().includes(query.toLowerCase());\n        });\n      }\n    },\n    onBlur() {\n      this.close();\n    },\n    onEsc() {\n      this.close();\n    },\n    close() {\n      this.results = [];\n      this.isOpen = false;\n      this.search = '';\n      this.selectIndex = -1;\n    },\n    onSearch(e) {\n      const q = e.target.value;\n      this.selectIndex = 0;\n      this.fetchData(q);\n    },\n    onUpKey() {\n      if (this.selectIndex > 0) {\n        this.selectIndex--;\n      }\n    },\n    onDownKey() {\n      if (this.results.length - 1 > this.selectIndex) {\n        this.selectIndex++;\n      }\n    },\n    onEnterKey() {\n      const found = this.results[this.selectIndex];\n      if (found) {\n        this.select(found);\n      }\n    },\n    select(result) {\n      this.$emit('input', result[this.id]);\n      this.close();\n    },\n    onMouse(index) {\n      this.selectIndex = index;\n    }\n  }\n};","map":{"version":3,"names":["props","customClass","default","initialize","id","label","placeholder","data","tabindex","selectIndex","isOpen","search","results","query","temp","agencies","computed","selectedText","vm","result","filter","el","length","methods","addAgency","agency","agency_name","target","value","$store","dispatch","uri","then","response","$emit","agency_id","catch","error","errors","message","focus","$refs","toggle","onToggle","open","onKey","e","KeyCode","which","shiftKey","fetchData","$nextTick","toLowerCase","includes","onBlur","close","onEsc","onSearch","q","onUpKey","onDownKey","onEnterKey","found","select","onMouse","index"],"sources":["D:\\Aeriesys vue projects\\bidsportal.com\\admin\\src\\components\\AgencySearch.vue"],"sourcesContent":["<template>\r\n    <div :class=\"[isOpen ? 'search search-open' : 'search']\" class=\"dropdown-container\">\r\n        <div class=\"search-inner\">\r\n            <input class=\"form-control form-control-sm search-selected\" \r\n                ref=\"toggle\" \r\n                :tabindex=\"tabindex\"\r\n                :value=\"selectedText\"\r\n                :class=\"customClass\"\r\n                @click=\"onToggle\"\r\n                @keydown=\"onKey\"\r\n            >\r\n            <transition name=\"fade\" mode=\"out-in\">\r\n                <div class=\"agency-search-dropdown\" v-if=\"isOpen\">\r\n                    <div class=\"search-input_wrap\">\r\n                        \r\n                        <input type=\"text\" class=\"form-control form-control-sm search-input\" autocomplete=\"off\" placeholder=\"Search...\"\r\n                            ref=\"search\" @blur=\"onBlur\"\r\n                            @input=\"onSearch\"\r\n                            @keydown.esc=\"onEsc\"\r\n                            @keydown.up=\"onUpKey\"\r\n                            @keydown.down=\"onDownKey\"\r\n                            @keydown.enter=\"onEnterKey\"\r\n                        >\r\n                    </div>\r\n                    <div v-if=\"results && results.length\">\r\n                        <table class=\"table table-responsive-sm table-bordered table-striped table-sm search-list\">\r\n                            <tbody>\r\n                                <tr class=\"search-item\" v-for=\"(result, index) in results\" @mousedown.prevent=\"select(result)\" @mouseover.prevent=\"onMouse(index)\" :class=\"['search-link', selectIndex === index ? 'search-active':'']\" :key=\"index\">\r\n                                    <td>\r\n                                    {{ result[label] }}\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <div v-if=\"!results.length\">\r\n                        <button class=\"btn btn-info btn-sm\" @mousedown.prevent=\"addAgency\">Add Agency</button>\r\n                    </div>\r\n                </div>\r\n            </transition>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script type=\"text/javascript\">\r\n    export default {\r\n        props: {\r\n            customClass: {\r\n                default: ''\r\n            },\r\n            initialize: {\r\n                default: null\r\n            },\r\n            id: {\r\n                default: null\r\n            },\r\n            label: {\r\n                default: null\r\n            },\r\n            placeholder: {\r\n                default: \"Select One\"\r\n            },\r\n            data:{\r\n                default:null\r\n            },\r\n            tabindex: {\r\n                default: 0\r\n            }\r\n        },\r\n        data () {\r\n            return {\r\n                selectIndex: -1,\r\n                isOpen: false,\r\n                search: '',\r\n                results: [],\r\n                query: {\r\n                    search: ''\r\n                },\r\n                temp:[],\r\n                agencies:[]\r\n            }\r\n        },\r\n        computed: {\r\n            selectedText() {\r\n                let vm =this\r\n                if(vm.initialize) {\r\n                    let result = vm.data.filter(function (el) {\r\n                        return el[vm.id]==vm.initialize\r\n                    });\r\n                    if(result && result.length!=0) {\r\n                        return result[0][vm.label]\r\n                    }\r\n                    else {\r\n                        return vm.placeholder;\r\n                    }\r\n                }\r\n                else {\r\n                    return vm.placeholder;\r\n                }\r\n            }\r\n        },\r\n        \r\n        methods: {\r\n            addAgency() {\r\n                let vm = this\r\n                let agency = {\r\n                    agency_name : this.initialize?.target?.value\r\n                }\r\n                vm.$store\r\n                    .dispatch(\"post\", { uri: \"addAgency\", data: agency })\r\n                    .then(function (response) {\r\n                        vm.$emit('updateAgencies')\r\n                        vm.$emit('input', response.data?.agency?.agency_id)\r\n                        vm.isOpen = false\r\n                        vm.$store.dispatch(\"success\", \"Agency added successfully\");\r\n                    })\r\n                    .catch(function (error) {\r\n                        vm.errors = error.response.data.errors;\r\n                        vm.$store.dispatch(\"error\", error.response.data.message);\r\n                    });\r\n            },\r\n            focus: function () {\r\n                this.$refs.toggle.focus()\r\n            },\r\n\r\n            onToggle() {\r\n                if(this.isOpen) {\r\n                    this.isOpen = false\r\n                } else {\r\n                    this.open()\r\n                }\r\n            },\r\n            onKey(e) {\r\n                const KeyCode = e.KeyCode || e.which\r\n                if(!e.shiftKey && KeyCode !== 9 && !this.isOpen) {\r\n                    this.open()\r\n                }\r\n            },\r\n            open() {\r\n                this.fetchData('')\r\n                this.isOpen = true\r\n                this.$nextTick(() => {\r\n                    this.$refs.search.focus()\r\n                })\r\n            },\r\n            fetchData(query) {\r\n                let vm = this;\r\n                if(query==\"\") {\r\n                    vm.results = vm.data;\r\n                }\r\n                else {\r\n                    vm.results = vm.data.filter(function (el) {\r\n                        return el[vm.label].toLowerCase().includes(query.toLowerCase())\r\n                    });\r\n                \r\n                }\r\n            },\r\n            onBlur() {\r\n                this.close()\r\n            },\r\n            onEsc() {\r\n                this.close()\r\n            },\r\n            close() {\r\n                this.results = []\r\n                this.isOpen = false\r\n                this.search = ''\r\n                this.selectIndex = -1\r\n            },\r\n            onSearch(e) {\r\n                const q = e.target.value\r\n                this.selectIndex = 0\r\n                this.fetchData(q)\r\n            },\r\n            onUpKey() {\r\n                if(this.selectIndex > 0) {\r\n                    this.selectIndex--\r\n                }\r\n            },\r\n            onDownKey() {\r\n                if(this.results.length - 1 > this.selectIndex) {\r\n                    this.selectIndex++\r\n                }\r\n            },\r\n            onEnterKey() {\r\n                const found = this.results[this.selectIndex]\r\n                if(found) {\r\n                    this.select(found)\r\n                }\r\n            },\r\n            select(result) {\r\n                this.$emit('input', result[this.id])\r\n                this.close()\r\n            },\r\n            onMouse(index) {\r\n                this.selectIndex = index\r\n               \r\n             \r\n            }\r\n         }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .search {\r\n      position: relative;\r\n      display: block;\r\n      background: #fff;\r\n    }\r\n\r\n    .search-open {\r\n      border-bottom: 0;\r\n    }\r\n\r\n    .search-open .form-control {\r\n        background: #fff;\r\n        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n        border: 1px solid #f2f2f2;\r\n    }\r\n\r\n    .search-inner {\r\n        position: relative;\r\n    }\r\n\r\n    .search-selected {\r\n        cursor: pointer;\r\n        -webkit-user-select: none;\r\n        -moz-user-select: none;\r\n        -ms-user-select: none;\r\n        user-select: none;\r\n        display: -webkit-box !important;\r\n        display: -ms-flexbox !important;\r\n        display: flex !important;\r\n        -webkit-box-pack: justify;\r\n        -ms-flex-pack: justify;\r\n        justify-content: space-between;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .agency-search-dropdown {\r\n      width: 200%;\r\n      position: absolute;\r\n      /* z-index: 999 !important; */\r\n      z-index:10000 !important;\r\n      padding: 5px;\r\n      background: #fff;\r\n      border-right: 1px solid #f2f2f2;\r\n      border-left: 1px solid #f2f2f2;\r\n      -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);\r\n       overflow-y: scroll !important;\r\n      max-height: 300px !important;        \r\n    }\r\n\r\n    .search-input {\r\n      line-height: 13px;\r\n      font-size: 13px;\r\n      background: #fafafa;\r\n      border: none;\r\n      min-height: 10px !important;\r\n      border-radius: 1px;\r\n      -webkit-box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\r\n              box-shadow: inset 0 1px 1px 0 rgba(0, 0, 0, 0.1);\r\n      padding: 4px 4px;\r\n      width: 100%;\r\n      display: block;\r\n     \r\n    }\r\n\r\n    .search-input:focus {\r\n      outline-style: dotted;\r\n      outline-width: 1px;\r\n      outline-offset: 1px;\r\n    }\r\n\r\n    .search-input_wrap {\r\n      position: relative;\r\n    }\r\n\r\n    .search-list {\r\n      /* display: block; */\r\n      margin: 0;\r\n      padding: 0;\r\n    }\r\n\r\n    .search-link {\r\n      cursor: pointer;\r\n      padding: 2px;\r\n      background: #fff;\r\n    }\r\n\r\n    .search-active {\r\n      background: #3aa3e3 !important;\r\n      color: #fff;\r\n    }\r\n\r\n    .search-list td, th { \r\n        white-space: nowrap; \r\n        overflow: hidden; \r\n        text-overflow:ellipsis; \r\n    }\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}